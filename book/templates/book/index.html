{% extends 'base.html' %}
{% block title %}本棚アプリ{% endblock %}
{% block h1 %}本棚アプリ{% endblock %}
{% block content %}
{% if searchForm %}
<div id="sort-a" class="sort-c" style="touch-action: cross-slide-y;">
    <form name="a" action="{% url 'index' %}" method="get">
        <div>
            {{ searchForm }}
            <input type="submit" value="検索">
            <a href="{% url 'index' %}">クリア</a>
        </div>
        <input type="hidden" class="form-a" name="b" value="id">
        <button href="#" class="sortbtn">古い順</button>
        <input type="hidden" class="form-a" name="b" value="-id">
        <button href="#" class="sortbtn">新しい順</button>
        <input type="hidden" class="form-a" name="b" value="rank">
        <button href="#" class="sortbtn">評価順</button>
    </form>
</div>
{% endif %}
<div class="row">
    <div class="col-9">
        <div>
            {% for item in object_list %}
            <div class="p-4 m-4 bg-light border border-success rounded">
                <h2 class="text-success">{{ item.title }}</h2>
                <img src="{{ item.thumbnail.url }}" class="img-thumbnail" />
                <h6>カテゴリ：{{ item.category }}</h6>
                <h6>評価：{{ item.avg_rating|floatformat:2 }}点</h6>
                <div class="mt-3">
                    <a href="{% url 'detail-book' item.pk %}">詳細へ</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="col-3">
        <h2>評価順</h2>
            {% for ranking_book in page_obj %}
                <div class="p-4 m-4 bg-light border border-success rounded">
                    <h3 class="text-success h5">{{ ranking_book.title }}</h3>
                    <img src="{{ ranking_book.thumbnail.url }}" class="img-thumbnail" />
                    <h6>評価：{{ ranking_book.avg_rating|floatformat:2 }}点</h6>
                    <a href="{% url 'detail-book' ranking_book.id %}">詳細を見る</a>
                </div>
            {% endfor %}
            {% include 'book/components/pagination.html' %}
    </div>
</div>
{% endblock content %}